#include <stdlib.h>
#include <stdio.h>

int main();
int main_return_addr; 

void _main() {
    printf("Function never called\n");
    int *ret;
    ret = (int *)&ret + 4; // value depends on system could be 2
    (*ret) = main_return_addr; 
}

void change_return_address() {
    int *ret;
    ret = (int *)&ret + 4; // value depends on system could be 2
    main_return_addr = *ret;
    (*ret) = (intptr_t)&_main; 
}

int main() {
    
    printf("Before changing return address\n");
    change_return_address();
    printf("After changing return address\n");
    exit(0);

    return 0;
}
